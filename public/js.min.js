function initialize(){vex.defaultOptions.className="vex-theme-plain","http://www.where.kim/"===window.location.href&&vex.dialog.alert($("#info").html());var e={disableDefaultUI:!0,panControl:!1,zoomControl:!0,zoom:10,mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_RIGHT,style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID]}};map=new google.maps.Map(document.getElementById("map-canvas"),e),draw(),search(),infoControl(),saveControl(),saveAsControl(),clearControl();var t={map:map,position:new google.maps.LatLng(41.880454799999995,-87.6251393)};map.setCenter(t.position),load()}function clearControl(){var e=document.createElement("div");new ClearControl(e,map),e.index=1,map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(e)}function ClearControl(e){e.style.padding="5px";var t=document.createElement("div");t.style.backgroundColor="white",t.style.borderStyle="solid",t.style.borderWidth="2px",t.style.cursor="pointer",t.style.textAlign="center",t.title="Click to start a new map",e.appendChild(t);var o=document.createElement("div");o.style.fontFamily="Arial,sans-serif",o.style.fontSize="12px",o.style.paddingLeft="4px",o.style.paddingRight="4px",o.innerHTML="<b>Clear</b>",t.appendChild(o),google.maps.event.addDomListener(t,"click",function(){window.location.href="/"})}function draw(){drawingManager.setMap(map),google.maps.event.addListener(drawingManager,"overlaycomplete",function(e){switch(output="",e.type){case google.maps.drawing.OverlayType.MARKER:output="m"+(e.overlay.getPosition()+""),constructMarker(output);break;default:path=e.overlay.getPath();var t=google.maps.geometry.encoding.encodePath(path);output="p"+t}output=output.replace(/\(/g,"").replace(/\)/g,"").replace(" ",""),console.log(output),save.add(output)})}function infoControl(){var e=document.createElement("div");new InfoControl(e,map),e.index=1,map.controls[google.maps.ControlPosition.BOTTOM_LEFT].push(e)}function InfoControl(e){e.style.padding="5px";var t=document.createElement("div");t.style.backgroundColor="white",t.style.borderStyle="solid",t.style.borderWidth="2px",t.style.cursor="pointer",t.style.textAlign="center",t.title="Click for Information and Help",e.appendChild(t);var o=document.createElement("div");o.style.fontFamily="Arial,sans-serif",o.style.fontSize="12px",o.style.paddingLeft="4px",o.style.paddingRight="4px",o.innerHTML="<b>Info</b>",t.appendChild(o),google.maps.event.addDomListener(t,"click",function(){vex.dialog.alert($("#readme").html())})}function constructPolyline(e){e=e.replace(/^p/g,""),console.log(e);var t=google.maps.geometry.encoding.decodePath(e);console.log(""+t),new google.maps.Polyline({path:t,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:5,map:map})}function constructMarker(e){var t=e.replace("m","").replace(/\(/g,"").replace(/\)/g,"").split(","),o=new google.maps.MVCArray;o.push(new google.maps.LatLng(parseFloat(t[0]),parseFloat(t[1]))),o.forEach(function(e){createMarker({map:map,position:e})})}function createMarker(e){var t=new google.maps.Marker(e);return google.maps.event.addListenerOnce(t,"click",function(){t.setMap(null),t=null}),t}function constructType(e){switch(e){case"th":map.setMapTypeId(google.maps.MapTypeId.HYBRID);break;case"tr":map.setMapTypeId(google.maps.MapTypeId.ROADMAP)}}function constructZoom(e){var t=e.replace("z","").replace(/\(/g,"").replace(/\)/g,"");map.setZoom(parseInt(t))}function constructCenter(e){var t=e.replace("c","").replace(/\(/g,"").replace(/\)/g,""),o=t.split(",");map.setCenter(new google.maps.LatLng(parseFloat(o[0]),parseFloat(o[1])))}function getQueryString(){if(-1==window.location.href.indexOf("?"))return null;var e=window.location.href.slice(window.location.href.indexOf("?")+1);return 1>=e.length?null:LZString.decompressFromBase64(e)}function getDataString(){var e=$("#data").text();return 0==e.length?null:LZString.decompressFromBase64(e)}function getOverlayArray(){return getDataString().split(":")}function load(){if(null!==getDataString()){var e=getOverlayArray();console.log(e);for(var t=e.length-1;t>=0;t--)console.log(e[t]),0==e[t].indexOf("t")&&constructType(e[t]),0==e[t].indexOf("z")&&constructZoom(e[t]),0==e[t].indexOf("c")&&constructCenter(e[t]),0==e[t].indexOf("p")&&(constructPolyline(e[t]),save.add(e[t])),0==e[t].indexOf("m")&&(constructMarker(e[t]),save.add(e[t]))}}function SaveData(){this.drawLog=[]}function saveControl(){var e=document.createElement("div");new SaveControl(e,map),e.index=1,map.controls[google.maps.ControlPosition.BOTTOM_LEFT].push(e)}function saveAsControl(){var e=document.createElement("div");new SaveAsControl(e,map),e.index=1,map.controls[google.maps.ControlPosition.BOTTOM_LEFT].push(e)}function SaveControl(e){e.style.padding="5px";var t=document.createElement("div");t.style.backgroundColor="white",t.style.borderStyle="solid",t.style.borderWidth="2px",t.style.cursor="pointer",t.style.textAlign="center",t.title="Click to save this map",e.appendChild(t);var o=document.createElement("div");o.style.fontFamily="Arial,sans-serif",o.style.fontSize="12px",o.style.paddingLeft="4px",o.style.paddingRight="4px",o.innerHTML="<b>Save</b>",t.appendChild(o),google.maps.event.addDomListener(t,"click",function(){save.save()})}function SaveAsControl(e){e.style.padding="5px";var t=document.createElement("div");t.style.backgroundColor="white",t.style.borderStyle="solid",t.style.borderWidth="2px",t.style.cursor="pointer",t.style.textAlign="center",t.title="Click to save a new copy of this map",e.appendChild(t);var o=document.createElement("div");o.style.fontFamily="Arial,sans-serif",o.style.fontSize="12px",o.style.paddingLeft="4px",o.style.paddingRight="4px",o.innerHTML="<b>Duplicate</b>",t.appendChild(o),google.maps.event.addDomListener(t,"click",function(){save.saveAs()})}function search(){var e=[],t=document.getElementById("pac-input");map.controls[google.maps.ControlPosition.TOP_LEFT].push(t);var o=new google.maps.places.SearchBox(t);google.maps.event.addListener(o,"places_changed",function(){for(var t,n=o.getPlaces(),a=0;t=e[a];a++)t.setMap(null);e=[],new google.maps.LatLngBounds;for(var r,a=0;r=n[a];a++){var i={url:r.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},t=new google.maps.Marker({map:map,icon:i,title:r.name,position:r.geometry.location});e.push(t),r.geometry.viewport?map.fitBounds(r.geometry.viewport):(map.setCenter(r.geometry.location),map.setZoom(17))}}),google.maps.event.addListener(map,"bounds_changed",function(){var e=map.getBounds();o.setBounds(e)}),{map:map,position:new google.maps.LatLng(41.880454799999995,-87.6251393)}}var map,drawingManager=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.MARKER,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,drawingModes:[google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.MARKER]},polylineOptions:{strokeWeight:5,strokeOpacity:.5,strokeColor:"#ff0000",clickable:!1,zIndex:1,editable:!1},polygonOptions:{editable:!1},markerOptions:{editable:!1}});(function(e){var t=!1,o=!1;e.getScript("https://apis.google.com/js/client.js",function(){(function n(){gapi.client?(t=!0,gapi.client.setApiKey(e.urlShortener.settings.apiKey),gapi.client.load("urlshortener",e.urlShortener.settings.version,function(){o=!0})):window.setTimeout(n,10)})()}),e.urlShortener=function(n){function a(e){var t={longUrl:e.longUrl},o=gapi.client.urlshortener.url.insert({resource:t});o.execute(function(t){null!=t.id?e.success&&e.success.call(this,t.id):e.error&&e.error.call(this,t.error)})}function r(e){var t={shortUrl:e.shortUrl,projection:e.projection},o=gapi.client.urlshortener.url.get(t);o.execute(function(t){null!=t.longUrl?e.success&&(void 0==e.projection?e.success.call(this,t.longUrl):e.success.call(this,t)):e.error&&e.error.call(this,t.error)})}var i={};e.extend(i,e.urlShortener.settings,n),function s(){t&&o?void 0!=i.longUrl?a(i):void 0!=i.shortUrl&&r(i):window.setTimeout(s,10)}()},e.urlShortener.settings={apiKey:"AIzaSyDIPa8VjR1Iybo-vl60dd3CpSmw2zyMfvA",version:"v1"}})(jQuery);var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var t,o,n,a,r,i,s,l="",p=0;for(e=LZString.compress(e);2*e.length>p;)0==p%2?(t=e.charCodeAt(p/2)>>8,o=255&e.charCodeAt(p/2),n=e.length>p/2+1?e.charCodeAt(p/2+1)>>8:0/0):(t=255&e.charCodeAt((p-1)/2),e.length>(p+1)/2?(o=e.charCodeAt((p+1)/2)>>8,n=255&e.charCodeAt((p+1)/2)):o=n=0/0),p+=3,a=t>>2,r=(3&t)<<4|o>>4,i=(15&o)<<2|n>>6,s=63&n,isNaN(o)?i=s=64:isNaN(n)&&(s=64),l=l+LZString._keyStr.charAt(a)+LZString._keyStr.charAt(r)+LZString._keyStr.charAt(i)+LZString._keyStr.charAt(s);return l},decompressFromBase64:function(e){if(null==e)return"";var t,o,n,a,r,i,s,l,p="",c=0,d=0,u=LZString._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");e.length>d;)r=LZString._keyStr.indexOf(e.charAt(d++)),i=LZString._keyStr.indexOf(e.charAt(d++)),s=LZString._keyStr.indexOf(e.charAt(d++)),l=LZString._keyStr.indexOf(e.charAt(d++)),o=r<<2|i>>4,n=(15&i)<<4|s>>2,a=(3&s)<<6|l,0==c%2?(t=o<<8,64!=s&&(p+=u(t|n)),64!=l&&(t=a<<8)):(p+=u(t|o),64!=s&&(t=n<<8),64!=l&&(p+=u(t|a))),c+=3;return LZString.decompress(p)},compressToUTF16:function(e){if(null==e)return"";var t,o,n,a="",r=0,i=LZString._f;for(e=LZString.compress(e),t=0;e.length>t;t++)switch(o=e.charCodeAt(t),r++){case 0:a+=i((o>>1)+32),n=(1&o)<<14;break;case 1:a+=i(n+(o>>2)+32),n=(3&o)<<13;break;case 2:a+=i(n+(o>>3)+32),n=(7&o)<<12;break;case 3:a+=i(n+(o>>4)+32),n=(15&o)<<11;break;case 4:a+=i(n+(o>>5)+32),n=(31&o)<<10;break;case 5:a+=i(n+(o>>6)+32),n=(63&o)<<9;break;case 6:a+=i(n+(o>>7)+32),n=(127&o)<<8;break;case 7:a+=i(n+(o>>8)+32),n=(255&o)<<7;break;case 8:a+=i(n+(o>>9)+32),n=(511&o)<<6;break;case 9:a+=i(n+(o>>10)+32),n=(1023&o)<<5;break;case 10:a+=i(n+(o>>11)+32),n=(2047&o)<<4;break;case 11:a+=i(n+(o>>12)+32),n=(4095&o)<<3;break;case 12:a+=i(n+(o>>13)+32),n=(8191&o)<<2;break;case 13:a+=i(n+(o>>14)+32),n=(16383&o)<<1;break;case 14:a+=i(n+(o>>15)+32,(32767&o)+32),r=0}return a+i(n+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var t,o,n="",a=0,r=0,i=LZString._f;e.length>r;){switch(o=e.charCodeAt(r)-32,a++){case 0:t=o<<1;break;case 1:n+=i(t|o>>14),t=(16383&o)<<2;break;case 2:n+=i(t|o>>13),t=(8191&o)<<3;break;case 3:n+=i(t|o>>12),t=(4095&o)<<4;break;case 4:n+=i(t|o>>11),t=(2047&o)<<5;break;case 5:n+=i(t|o>>10),t=(1023&o)<<6;break;case 6:n+=i(t|o>>9),t=(511&o)<<7;break;case 7:n+=i(t|o>>8),t=(255&o)<<8;break;case 8:n+=i(t|o>>7),t=(127&o)<<9;break;case 9:n+=i(t|o>>6),t=(63&o)<<10;break;case 10:n+=i(t|o>>5),t=(31&o)<<11;break;case 11:n+=i(t|o>>4),t=(15&o)<<12;break;case 12:n+=i(t|o>>3),t=(7&o)<<13;break;case 13:n+=i(t|o>>2),t=(3&o)<<14;break;case 14:n+=i(t|o>>1),t=(1&o)<<15;break;case 15:n+=i(t|o),a=0}r++}return LZString.decompress(n)},compress:function(e){if(null==e)return"";var t,o,n,a={},r={},i="",s="",l="",p=2,c=3,d=2,u="",g=0,m=0,v=LZString._f;for(n=0;e.length>n;n+=1)if(i=e.charAt(n),Object.prototype.hasOwnProperty.call(a,i)||(a[i]=c++,r[i]=!0),s=l+i,Object.prototype.hasOwnProperty.call(a,s))l=s;else{if(Object.prototype.hasOwnProperty.call(r,l)){if(256>l.charCodeAt(0)){for(t=0;d>t;t++)g<<=1,15==m?(m=0,u+=v(g),g=0):m++;for(o=l.charCodeAt(0),t=0;8>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1}else{for(o=1,t=0;d>t;t++)g=g<<1|o,15==m?(m=0,u+=v(g),g=0):m++,o=0;for(o=l.charCodeAt(0),t=0;16>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1}p--,0==p&&(p=Math.pow(2,d),d++),delete r[l]}else for(o=a[l],t=0;d>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1;p--,0==p&&(p=Math.pow(2,d),d++),a[s]=c++,l=i+""}if(""!==l){if(Object.prototype.hasOwnProperty.call(r,l)){if(256>l.charCodeAt(0)){for(t=0;d>t;t++)g<<=1,15==m?(m=0,u+=v(g),g=0):m++;for(o=l.charCodeAt(0),t=0;8>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1}else{for(o=1,t=0;d>t;t++)g=g<<1|o,15==m?(m=0,u+=v(g),g=0):m++,o=0;for(o=l.charCodeAt(0),t=0;16>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1}p--,0==p&&(p=Math.pow(2,d),d++),delete r[l]}else for(o=a[l],t=0;d>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1;p--,0==p&&(p=Math.pow(2,d),d++)}for(o=2,t=0;d>t;t++)g=g<<1|1&o,15==m?(m=0,u+=v(g),g=0):m++,o>>=1;for(;;){if(g<<=1,15==m){u+=v(g);break}m++}return u},decompress:function(e){if(null==e)return"";if(""==e)return null;var t,o,n,a,r,i,s,l,p=[],c=4,d=4,u=3,g="",m="",v=LZString._f,f={string:e,val:e.charCodeAt(0),position:32768,index:1};for(o=0;3>o;o+=1)p[o]=o;for(a=0,i=Math.pow(2,2),s=1;s!=i;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=32768,f.val=f.string.charCodeAt(f.index++)),a|=(r>0?1:0)*s,s<<=1;switch(t=a){case 0:for(a=0,i=Math.pow(2,8),s=1;s!=i;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=32768,f.val=f.string.charCodeAt(f.index++)),a|=(r>0?1:0)*s,s<<=1;l=v(a);break;case 1:for(a=0,i=Math.pow(2,16),s=1;s!=i;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=32768,f.val=f.string.charCodeAt(f.index++)),a|=(r>0?1:0)*s,s<<=1;l=v(a);break;case 2:return""}for(p[3]=l,n=m=l;;){if(f.index>f.string.length)return"";for(a=0,i=Math.pow(2,u),s=1;s!=i;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=32768,f.val=f.string.charCodeAt(f.index++)),a|=(r>0?1:0)*s,s<<=1;switch(l=a){case 0:for(a=0,i=Math.pow(2,8),s=1;s!=i;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=32768,f.val=f.string.charCodeAt(f.index++)),a|=(r>0?1:0)*s,s<<=1;p[d++]=v(a),l=d-1,c--;break;case 1:for(a=0,i=Math.pow(2,16),s=1;s!=i;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=32768,f.val=f.string.charCodeAt(f.index++)),a|=(r>0?1:0)*s,s<<=1;p[d++]=v(a),l=d-1,c--;break;case 2:return m}if(0==c&&(c=Math.pow(2,u),u++),p[l])g=p[l];else{if(l!==d)return null;g=n+n.charAt(0)}m+=g,p[d++]=n+g.charAt(0),c--,n=g,0==c&&(c=Math.pow(2,u),u++)}}};"undefined"!=typeof module&&null!=module&&(module.exports=LZString);var save=new SaveData;SaveData.prototype.saveAs=function(){console.log(this.base64());var e=this.base64();vex.dialog.prompt({message:"What would you like to name this map?",placeholder:"Cool Map!",callback:function(t){document.title=t,$.post("/",{name:t,data:e},function(e,t){console.log(e),console.log(t),window.history.pushState("Object","Title","/map/"+e),vex.dialog.alert("<p>Saved Successfully!</p><p>This new map's URL is <a href='/map/"+e+"'>/map/"+e+"/</a></p>")})}})},SaveData.prototype.save=function(){console.log(this.base64());var e=this.base64();-1==window.location.href.indexOf("map")?save.saveAs():$.post(window.location.href,{data:e},function(e,t){console.log(e),console.log(t),window.history.pushState("Object","Title","/map/"+e),vex.dialog.alert("<p>Saved Successfully!</p><p>This map's URL is <a href='/map/"+e+"'>/map/"+e+"/</a></p>")})},SaveData.prototype.base64=function(){return LZString.compressToBase64(this.metadata()+this.drawLog.join(":"))},SaveData.prototype.metadata=function(){var e="";switch(map.getMapTypeId()){case"roadmap":e+="tr:";break;case"hybrid":e+="th:"}return e+="z"+map.zoom+":",e+="c"+(""+map.getCenter())+":",e=e.replace(/\(/g,"").replace(/\)/g,"").replace(" ","")},SaveData.prototype.add=function(e){this.drawLog.push(e)},google.maps.event.addDomListener(window,"load",initialize),function(){var e;e=function(e){var t,o;return t=!1,e(function(){var n;return n=(document.body||document.documentElement).style,t=void 0!==n.animation||void 0!==n.WebkitAnimation||void 0!==n.MozAnimation||void 0!==n.MsAnimation||void 0!==n.OAnimation,e(window).bind("keyup.vex",function(e){return 27===e.keyCode?o.closeByEscape():void 0})}),o={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},defaultOptions:{content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{}},open:function(t){return t=e.extend({},o.defaultOptions,t),t.id=o.globalID,o.globalID+=1,t.$vex=e("<div>").addClass(o.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.$vexOverlay=e("<div>").addClass(o.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){return t.target===this?o.close(e(this).data().vex.id):void 0}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(o.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vex.append(t.$vexContent),t.showCloseButton&&(t.$closeButton=e("<div>").addClass(o.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return o.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),o.setupBodyClassName(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getAllVexes:function(){return e("."+o.baseClassNames.vex+':not(".'+o.baseClassNames.closing+'") .'+o.baseClassNames.content)},getVexByID:function(t){return o.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){if(t=o.getAllVexes().last(),!t.length)return!1;e=t.data().vex.id}return o.closeByID(e)},closeAll:function(){var t;return t=o.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=t?t.length:void 0)?(e.each(t.reverse(),function(e,t){return o.closeByID(t)}),!0):!1},closeByID:function(n){var a,r,i,s,l;return r=o.getVexByID(n),r.length?(a=r.data().vex.$vex,l=e.extend({},r.data().vex),i=function(){return l.beforeClose?l.beforeClose(r,l):void 0},s=function(){return r.trigger("vexClose",l),a.remove(),l.afterClose?l.afterClose(r,l):void 0},t?(i(),a.unbind(o.animationEndEvent).bind(o.animationEndEvent,function(){return s()}).addClass(o.baseClassNames.closing)):(i(),s()),!0):void 0},closeByEscape:function(){var t,n,a;return a=o.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=a?a.length:void 0)?(n=Math.max.apply(Math,a),t=o.getVexByID(n),t.data().vex.escapeButtonCloses!==!0?!1:o.closeByID(n)):!1},setupBodyClassName:function(t){return t.bind("vexOpen.vex",function(){return e("body").addClass(o.baseClassNames.open)}).bind("vexClose.vex",function(){return o.getAllVexes().length?void 0:e("body").removeClass(o.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return o.hideLoading(),e("body").append('<div class="vex-loading-spinner '+o.defaultOptions.className+'"></div>')}}},"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):window.vex=e(jQuery)}.call(this),function(){var e;e=function(e,t){var o,n;return null==t?e.error("Vex is required to use vex.dialog"):(o=function(t){var o;return o={},e.each(t.serializeArray(),function(){return o[this.name]?(o[this.name].push||(o[this.name]=[o[this.name]]),o[this.name].push(this.value||"")):o[this.name]=this.value||""}),o},n={},n.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(e){return e.data().vex.value=!1,t.close(e.data().vex.id)}}},n.defaultOptions={callback:function(){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[n.buttons.YES,n.buttons.NO],showCloseButton:!1,onSubmit:function(a){var r,i;return r=e(this),i=r.parent(),a.preventDefault(),a.stopPropagation(),i.data().vex.value=n.getFormValueOnSubmit(o(r)),t.close(i.data().vex.id)},focusFirstInput:!0},n.defaultAlertOptions={message:"Alert",buttons:[n.buttons.YES]},n.defaultConfirmOptions={message:"Confirm"},n.open=function(o){var a;return o=e.extend({},t.defaultOptions,n.defaultOptions,o),o.content=n.buildDialogForm(o),o.beforeClose=function(e){return o.callback(e.data().vex.value)},a=t.open(o),o.focusFirstInput&&a.find('input[type="submit"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),a},n.alert=function(t){return"string"==typeof t&&(t={message:t}),t=e.extend({},n.defaultAlertOptions,t),n.open(t)},n.confirm=function(t){return"string"==typeof t?e.error("dialog.confirm(options) requires options.callback."):(t=e.extend({},n.defaultConfirmOptions,t),n.open(t))},n.prompt=function(t){var o;return"string"==typeof t?e.error("dialog.prompt(options) requires options.callback."):(o={message:'<label for="vex">'+(t.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(t.placeholder||"")+'"  value="'+(t.value||"")+'" />'},t=e.extend({},o,t),n.open(t))},n.buildDialogForm=function(t){var o,a,r;return o=e('<form class="vex-dialog-form" />'),r=e('<div class="vex-dialog-message" />'),a=e('<div class="vex-dialog-input" />'),o.append(r.append(t.message)).append(a.append(t.input)).append(n.buttonsToDOM(t.buttons)).bind("submit.vex",t.onSubmit),o},n.getFormValueOnSubmit=function(e){return e.vex||""===e.vex?"_vex-empty-value"===e.vex?!0:e.vex:e},n.buttonsToDOM=function(o){var n;return n=e('<div class="vex-dialog-buttons" />'),e.each(o,function(a,r){return n.append(e('<input type="'+r.type+'" />').val(r.text).addClass(r.className+" vex-dialog-button "+(0===a?"vex-first ":"")+(a===o.length-1?"vex-last ":"")).bind("click.vex",function(o){return r.click?r.click(e(this).parents("."+t.baseClassNames.content),o):void 0}))}),n},n)},"function"==typeof define&&define.amd?define(["jquery","vex"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("vex")):window.vex.dialog=e(window.jQuery,window.vex)}.call(this);